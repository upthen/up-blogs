---
title: C++ ç¼–ç è§„èŒƒ
description: è½¯ä»¶å¼€å‘ï¼Œæ²¡æœ‰è§„çŸ©ï¼Œä¸æˆæ–¹åœ†ï¼Œä¸ªäººçš„ç¼–ç ä¹ æƒ¯éœ€è¦é€šè¿‡å›¢é˜Ÿç»Ÿä¸€çš„å¼€å‘è§„èŒƒæ¥çº¦æŸï¼Œä¸ç„¶ä¼šç»™å›¢é˜Ÿå¼€å‘å¸¦æ¥ç¾éš¾ã€‚è¿™é‡Œæ•´ç†äº†ä¸€ä»½ C++ é¢†åŸŸçš„ç¼–ç è§„èŒƒã€‚
tag: [C++]
---

# :star2: C++ç¼–ç è§„èŒƒ

è½¯ä»¶å¼€å‘ï¼Œæ²¡æœ‰è§„çŸ©ï¼Œä¸æˆæ–¹åœ†ï¼Œä¸ªäººçš„ç¼–ç ä¹ æƒ¯éœ€è¦é€šè¿‡å›¢é˜Ÿç»Ÿä¸€çš„å¼€å‘è§„èŒƒæ¥çº¦æŸï¼Œä¸ç„¶ä¼šç»™å›¢é˜Ÿå¼€å‘å¸¦æ¥ç¾éš¾ã€‚

è¿™é‡Œæ•´ç†äº† C++ é¢†åŸŸçš„ä¸€äº›å…¬è®¤è®¤å¯åº¦è¾ƒé«˜çš„ç¼–ç è§„èŒƒã€‚

## è°·æ­ŒC++ç¼–ç è§„èŒƒ

> [!NOTE]
>
> ç®€ç§° GSGï¼Œè°·æ­Œçš„ C++ ç¼–ç¨‹è§„èŒƒï¼Œåœ¨å›½å†…æœ‰è¾ƒå¤§å½±å“åŠ›ï¼Œæ˜¯ä¼ä¸šçº§è§„èŒƒï¼Œå¯¹ä»£ç çš„å…·ä½“æ ·å¼æœ‰ç»†è‡´çš„è§„å®šï¼Œå¯ç›´æ¥é‡‡ç”¨ã€‚
>
> ç”±äºå†å²åŸå› ï¼ŒGSG è¾ƒä¸ºä¿å®ˆï¼Œé€šè¿‡æŠ‘åˆ¶è¯­è¨€ç‰¹æ€§ä»¥è¾¾åˆ°è§„é¿é£é™©çš„ç›®çš„ã€‚åœ¨æ—©æœŸå°šæœªå½¢æˆæ‰€è°“â€œç°ä»£â€ç¼–ç¨‹æ€æƒ³çš„æ—¶å€™ï¼Œæ­¤è§„èŒƒå°±å·²ç»é¢ä¸–å¹¶å‘æŒ¥ä½œç”¨äº†ï¼Œå…¶ä¸­çš„æŸäº›è§‚ç‚¹å¯èƒ½ä¸ C++ å®˜æ–¹ä¸ç¬¦ï¼Œæ¯”å¦‚ C++ åˆ›å§‹äººæ›¾ä¸€åº¦è®¤ä¸ºç”¨å¸¸æ•° 0 è¡¨ç¤ºç©ºæŒ‡é’ˆæ¯”ç”¨ NULL æ›´å¥½ï¼Œè€Œ GSG çš„è§‚ç‚¹ä¸ä¹‹ç›¸åï¼Œä½†å†å²è¡¨æ˜ GSG çš„è§‚ç‚¹æ˜¯æ­£ç¡®çš„ï¼ŒC++11 å¼•å…¥äº†ä¸“å±ç¬¦å· nullptr ä»¥è¡¨ç¤ºç©ºæŒ‡é’ˆçš„å€¼ã€‚
>
> GSG æ˜¯å®è·µç»éªŒçš„æ€»ç»“ï¼Œä¹Ÿåœ¨ä¸æ–­å‘å±•ï¼Œç›®å‰å·²é€‚åº” C++17ï¼Œå¯¹æå‡ä»£ç å¯ç»´æŠ¤æ€§æœ‰å¾ˆé«˜çš„å‚è€ƒä»·å€¼ã€‚

1. è°·æ­Œå®˜æ–¹è§„èŒƒ github ä»“åº“ï¼Œä¸åªæœ‰ c++ï¼Œè¿˜æœ‰å…¶ä»–è¯­è¨€ã€‚

   [:book: google style guide](https://github.com/google/styleguide)

2. è°·æ­Œå¼€å‘è§„èŒƒä¸­æ–‡ç‰ˆï¼ˆç¤¾åŒºç¿»è¯‘ï¼‰

   [:book: è°·æ­Œå¼€å‘è§„èŒƒä¸­æ–‡ç‰ˆ\_github](https://github.com/zh-google-styleguide/zh-google-styleguide)

   [:earth*africa: è°·æ­Œå¼€å‘è§„èŒƒä¸­æ–‡ç‰ˆ*ç½‘é¡µç‰ˆ](https://zh-google-styleguide.readthedocs.io/en/latest/contents.html)

## C++ Core Guidelines

> [!NOTE]
>
> ç®€ç§° CCGï¼Œæ˜¯ **C++ åˆ›å§‹äºº**å¯¹ C++ ä»£ç ç¼–å†™çš„å®è§‚æŒ‡å¯¼ï¼Œå±äºè¯­è¨€çº§è§„èŒƒä½“ç³»ï¼Œå…¨é¢åœ°é˜è¿°äº†ç°ä»£ C++ ç¼–ç¨‹æ€æƒ³ï¼Œä»¥è§„åˆ™æ¡æ¬¾çš„å½¢å¼æ˜ç¡®åœ°æŒ‡å‡ºå“ªäº›æ˜¯è¦é¿å…çš„ï¼Œå“ªäº›æ˜¯å€¼å¾—æå€¡çš„ï¼Œå…·æœ‰æƒå¨æ€§ï¼Œé€‚åˆå¼€å‘è€…å­¦ä¹ ã€‚
>
> ç”±äºå…¶ç¯‡å¹…å®å¤§ç»†èŠ‚ç¹å¤šï¼Œå¯åœ¨ç›¸åº”ä»£ç å®¡è®¡å·¥å…·çš„æ”¯æŒä¸‹ä½œä¸ºä¼ä¸šçš„ç¼–ç¨‹è§„èŒƒå’Œå®¡è®¡ä¾æ®ã€‚

1. C++ ä½œè€…ç¼–å†™çš„C++å¼€å‘è§„èŒƒ

   [:writing_hand: CppCoreGuidelines](http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines)

2. [GitHub - lynnboy/CppCoreGuidelines-zh-CN: Translation of C++ Core Guidelines [https://github.com/isocpp/CppCoreGuidelines\] into Simplified Chinese.](https://github.com/lynnboy/CppCoreGuidelines-zh-CN)
3. [C++ æ ¸å¿ƒæŒ‡å¯¼æ–¹é’ˆ | CppCoreGuidelines-zh-CN (lynnboy.github.io)](https://lynnboy.github.io/CppCoreGuidelines-zh-CN/CppCoreGuidelines-zh-CN)



## Qt ç¼–ç è§„èŒƒ

> å‚è€ƒèµ„æ–™ï¼š[ğŸ“„Qt Coding Style ä¸­æ–‡ç‰ˆ](https://wiki.qt.io/Qt_Coding_Style/zh)

##### ç¼©è¿›

- é‡‡ç”¨4ä¸ªç©ºæ ¼
- ç©ºæ ¼ï¼Œä¸è¦ç”¨TABï¼

##### å˜é‡å£°æ˜

- æ¯è¡Œä¸€ä¸ªå˜é‡
- å°½å¯èƒ½é¿å…çŸ­çš„å˜é‡å(æ¯”å¦‚"a", "rbarr", "nughdeget")
- å•å­—ç¬¦çš„å˜é‡åªåœ¨ä¸´æ—¶å˜é‡æˆ–å¾ªç¯çš„è®¡æ•°ä¸­ä½¿ç”¨
- ç­‰åˆ°çœŸæ­£éœ€è¦ä½¿ç”¨æ—¶å†å®šä¹‰å˜é‡

```TypeScript
// Wrong 
int a, b; 
char *c, *d;

// Correct 
int height; 
int width; 
char *nameOfThis; 
char '''nameOfThat; 
```

##### **ä»¥å°å†™å­—ç¬¦å¼€å¤´ï¼Œåç»­å•è¯ä»¥å¤§å†™å¼€å¤´(é©¼å³°å¼)**

- é¿å…ä½¿ç”¨ç¼©å†™

```TypeScript
// Wrong
short Cntr; 
char ITEM_DELIM = '';
// Correct 
short counter; 
char itemDelimiter = '';
```

- ç±»åæ€»æ˜¯ä»¥å¤§å†™å¼€å¤´ã€‚å…¬æœ‰ç±»ä»¥Qå¼€å¤´(QRgb)ï¼Œå…¬æœ‰å‡½æ•°é€šå¸¸ä»¥qå¼€å¤´(qRgb)ã€‚

##### **ç±»çš„æˆå‘˜å˜é‡ç»Ÿä¸€ä»¥ m_ å¼€å¤´**  <sup text-green>å›¢é˜Ÿè¡¥å……</sup>

```C++
class MainWindow : public QMainWindow //, public QAbstractNativeEventFilter
{
    Q_OBJECT

public:

privateï¼š

// Correct
QWidget* m_centralWidget;

// Wrong
QWidget* toolWidget;

};
```

##### ç©ºç™½

- åˆ©ç”¨ç©ºè¡Œå°†è¯­å¥æ°å½“åœ°åˆ†ç»„
- æ€»æ˜¯ä½¿ç”¨ä¸€ä¸ªç©ºè¡Œ(ä¸è¦ç©ºå¤šè¡Œ)
- æ€»æ˜¯åœ¨æ¯ä¸ªå…³é”®å­—å’Œå¤§æ‹¬å·å‰ä½¿ç”¨ä¸€ä¸ªç©ºæ ¼

```TypeScript
 // Wrong 
 if(foo){
 }
 // Correct 
 if (foo) {
 }
```

- å¯¹æŒ‡é’ˆå’Œå¼•ç”¨ï¼Œåœ¨ç±»å‹å’Œ*ã€&ä¹‹é—´åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä½†åœ¨*ã€&ä¸å˜é‡ä¹‹é—´ä¸åŠ ç©ºæ ¼

```TypeScript
char '''x; 
const QString &myString; 
const char''' const y = "hello"; 
```

- äºŒå…ƒæ“ä½œç¬¦å‰ååŠ ç©ºç™½
- ç±»å‹è½¬æ¢åä¸åŠ ç©ºç™½
- å°½é‡é¿å…Cé£æ ¼çš„ç±»å‹è½¬æ¢

```C++
 // Wrong
 char* blockOfMemory = (char* )
 malloc(data.size());
 // Correct
 char '''blockOfMemory = reinterpret_cast<char'''>(malloc(data.size()));
```

##### å¤§æ‹¬å·

- åŸºæœ¬åŸåˆ™ï¼šå·¦å¤§æ‹¬å·å’Œè¯­å¥ä¿æŒåœ¨åŒä¸€è¡Œï¼š

```C++
// Wrong 
if (codec) 
{
}
// Correct 
if (codec) {
} 
```

- ä¾‹å¤–ï¼šå‡½æ•°å®šä¹‰å’Œç±»å®šä¹‰ä¸­ï¼Œå·¦å¤§æ‹¬å·æ€»æ˜¯å•ç‹¬å ä¸€è¡Œï¼š

 

```C++
static void foo(int g)
{ 
    qDebug("foo: %i", g); 
}

class Moo 
{ 
};
```

- æ§åˆ¶è¯­å¥çš„bodyä¸­åªæœ‰ä¸€è¡Œæ—¶ä¸ä½¿ç”¨å¤§æ‹¬å· <sup text-red font-bold>ä¸é‡‡çº³</sup>ã€‚    **ï¼Œè¿™ä¸ªè§„åˆ™å®šçš„å¾ˆæ··ä¹±ï¼Œä¸”æ— æ„ä¹‰ï¼Œä¸‹é¢çš„ä¾‹å¤–ä¹Ÿä¸é‡‡çº³ï¼Œç»Ÿä¸€ä½¿ç”¨å¤§æ‹¬å·**

```C++
 // Wrong 
 if (address.isEmpty()) {
     return false;
 }
 
 for (int i = 0; i < 10; +''i) { 
     qDebug("%i", i);
 } 
 
 // Correct 
 if (address.isEmpty()) 
 return false; 
 
 for (int i = 0; i < 10;i) 
 qDebug("%i", i);
```

- ä¾‹å¤–1ï¼šå¦‚æœçˆ¶è¯­å¥è·¨å¤šè¡Œï¼Œåˆ™ä½¿ç”¨å¤§æ‹¬å·

```C++
 // Correct
 if (address.isEmpty() || !isValid() 
 || !codec) { 
     return false; 
 }
```

- ä¾‹å¤–2ï¼šåœ¨if-elseç»“æ„ä¸­ï¼Œæœ‰ä¸€å¤„è·¨å¤šè¡Œï¼Œåˆ™ä½¿ç”¨å¤§æ‹¬å·

```C++
 // Wrong 
 if (address.isEmpty()) 
     return false; 
 else { 
     qDebug("%s", qPrintable(address));
     it; 
 } 
 
 // Correct 
 if (address.isEmpty()) { 
     return false; 
 } else { 
     qDebug("%s", qPrintable(address));
     it; 
 } 
 
 // Wrong 
 if (a) 
 if (b) 
 â€¦ 
 else 
 â€¦ 
 
 // Correct 
 if (a) { 
     if (b) 
         â€¦ 
     else 
         â€¦ 
 }
```

- å¦‚æœæ§åˆ¶è¯­å¥çš„bodyä¸ºç©ºï¼Œåˆ™ä½¿ç”¨å¤§æ‹¬å·

```C++
 // Wrong 
 while (a); 
 // Correct 
 while (a) {}
```

##### åœ†æ‹¬å·

- ä½¿ç”¨åœ†æ‹¬å·å°†è¡¨è¾¾å¼åˆ†ç»„

```C++
// Wrong 
if (a && b || c) 

// Correct 
if ((a && b) || c) 

// Wrong 
a'' b & c
// Correct 
(a + b) & c 
```

##### Switch è¯­å¥

- case å’Œ switch ä½äºåŒä¸€åˆ—
- æ¯ä¸€ä¸ªcaseå¿…é¡»æœ‰ä¸€ä¸ªbreak(æˆ–renturn)è¯­å¥ï¼Œæˆ–è€…ç”¨æ³¨é‡Šè¯´æ˜æ— éœ€break

```C++
switch (myEnum) { 
case Value1: 
     doSomething(); 
     break; 
case Value2: 
     doSomethingElse(); 
// fall through 
default: 
    defaultHandling(); 
    break; 
}
```

##### æ–­è¡Œ

- ä¿æŒæ¯è¡ŒçŸ­äº100 ä¸ªå­—ç¬¦ï¼Œéœ€è¦æ—¶è¿›è¡Œæ–­è¡Œ
- é€—å·æ”¾ä¸€è¡Œçš„ç»“æŸï¼Œæ“ä½œç¬¦æ”¾åˆ°ä¸€è¡Œçš„å¼€å¤´ã€‚å¦‚æœä½ çš„ç¼–è¾‘å™¨å¤ªçª„ï¼Œä¸€ä¸ªæ”¾åœ¨è¡Œå°¾çš„æ“ä½œç¬¦ä¸å®¹æ˜“è¢«çœ‹åˆ°ã€‚

```C++
 // Correct 
 if (longExpression
 + otherLongExpression 
 + otherOtherLongExpression) {
 }
 
 // Wrong
 if (longExpression + 
 otherLongExpression + 
 otherOtherLongExpression) {
 }
```

##### ç»§æ‰¿ä¸å…³é”®å­— `virtual`

- é‡æ–°å®ç°ä¸€ä¸ªè™šå‡½æ•°æ—¶ï¼Œå¤´æ–‡ä»¶ä¸­ *ä¸* æ”¾ç½® virtual å…³é”®å­—ã€‚

##### é€šç”¨ä¾‹å¤–

- å¦‚æœå®ƒä½¿ä½ çš„ä»£ç çœ‹èµ·æ¥ä¸å¥½ï¼Œä½ å¯ä»¥æ‰“ç ´ä»»ä½•ä¸€ä¸ªè§„åˆ™ ã€‚

[Categories](https://wiki.qt.io/Special:Categories): 

- [Articles needing cleanup](https://wiki.qt.io/Category:Articles_needing_cleanup)
- [Developing Qt::Guidelines](https://wiki.qt.io/Category:Developing_Qt::Guidelines)

### æ›´æ–°æ—¥å¿—

## C/C++ linter å·¥å…·

1. C/C++ Advanced Lint

   > ä¸€ä¸ªç”¨äº c/c++ å¼€å‘çš„ linter vscode æ‰©å±•

## å…¶ä»–è§„èŒƒ

å‚è€ƒæ–‡ç« ä¸­çƒ­å¿ƒç½‘å‹æ€»ç»“çš„å…¶ä»–å„ç±»è§„èŒƒï¼š

[:earth_americas: å„å¤§å‚ C/C++ ç¼–ç¨‹è§„èŒƒè¯¦è§£](https://www.cnblogs.com/lucky-bubble/p/16037810.html)

[:earth_africa: Qtçš„ç¼–ç¨‹é£æ ¼ä¸è§„èŒƒ](https://www.cnblogs.com/lsgxeva/p/7873568.html)
